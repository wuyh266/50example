{
  "scriptContent": "let flag = true;\nconst myswitch = () => {\n    // 清除错误消息\n    document.getElementById('registerError').textContent = '';\n    document.getElementById('loginError').textContent = '';\n    \n    if (flag) {\n        $(\".pre-box\").css(\"transform\", \"translateX(100%)\")\n        $(\".pre-box\").css(\"background-color\", \"#A0A0FB\")\n        $(\"img\").attr(\"src\", \"./img/soyoxiu.jpg\")\n    } else {\n        $(\".pre-box\").css(\"transform\", \"translateX(0%)\")\n        $(\".pre-box\").css(\"background-color\", \"#97B8FC\")\n        $(\"img\").attr(\"src\", \"./img/soyo.jpg\")\n    }\n    flag = !flag;\n}\n\n// 注册功能\nfunction register() {\n    const username = document.getElementById('regUsername').value.trim();\n    const password = document.getElementById('regPassword').value;\n    const confirmPassword = document.getElementById('regConfirmPassword').value;\n    const errorElement = document.getElementById('registerError');\n\n    // 前端验证\n    if (!username || !password || !confirmPassword) {\n        errorElement.textContent = '请填写所有字段';\n        return;\n    }\n\n    if (password !== confirmPassword) {\n        errorElement.textContent = '两次密码输入不一致';\n        return;\n    }\n\n    if (password.length < 6) {\n        errorElement.textContent = '密码长度不能少于6位';\n        return;\n    }\n\n    // 发送注册请求到后端\n    $.ajax({\n        url: '/api/register',\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify({\n            username: username,\n            password: password\n        }),\n        success: function(response) {\n            if (response.success) {\n                alert('注册成功，请登录');\n                myswitch();\n            } else {\n                errorElement.textContent = response.message || '注册失败，请重试';\n            }\n        },\n        error: function(xhr) {\n            const error = JSON.parse(xhr.responseText);\n            errorElement.textContent = error.message || '服务器错误，请稍后重试';\n        }\n    });\n}\n\n// 登录功能\nfunction login() {\n    const username = document.getElementById('loginUsername').value.trim();\n    const password = document.getElementById('loginPassword').value;\n    const errorElement = document.getElementById('loginError');\n\n    // 前端验证\n    if (!username || !password) {\n        errorElement.textContent = '请填写用户名和密码';\n        return;\n    }\n\n    // 发送登录请求到后端\n    $.ajax({\n        url: '/api/login',\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify({\n            username: username,\n            password: password\n        }),\n        success: function(response) {\n            if (response.success) {\n                localStorage.setItem('token', response.token);\n                localStorage.setItem('username', username);\n                window.location.href = '/index.html';\n            } else {\n                errorElement.textContent = response.message || '用户名或密码错误';\n            }\n        },\n        error: function(xhr) {\n            const error = JSON.parse(xhr.responseText);\n            errorElement.textContent = error.message || '服务器错误，请稍后重试';\n        }\n    });\n}"
}